\ProvidesPackage{beamerthememlr}

% Color palette
\mode<presentation>
\definecolor{mlrblue}{RGB}{3,99,142}
\definecolor{mlrgray}{RGB}{66,66,66}

% Settings
\setbeamercolor{headline}{fg=red,bg=white} % Header background
\setbeamercolor{footline}{fg=red, bg=red}
\setbeamerfont{footline}{size=\large,series=\bf}
\setbeamercolor{separation line}{bg=white}
\setbeamercolor{title in headline}{fg=mlrgray}

\setbeamercolor{framesubtitle}{fg=red, bg=white}
\setbeamercolor{author in head/foot}{fg=black, bg=white} % Footer background
\setbeamercolor{title in head/foot}{fg=red, bg=red}

\setbeamercolor*{normal text}{fg=black, bg=white} % Body background
\setbeamercolor*{block body}{fg=black, bg=white}
\setbeamercolor*{block title}{fg=black,bg=white}
\setbeamerfont{block title}{size=\large,series=\bf}
\setbeamercolor{upper separation line head}{fg=red}

\setbeamercolor*{example body}{fg=red,bg=red}
\setbeamercolor*{example text}{fg=red,bg=red}
\setbeamercolor*{example title}{bg=red,fg=red}

\setbeamercolor{alerted text}{fg=red}
\setbeamercolor{structure}{fg=red}

\setbeamertemplate{itemize items}{\color{black}$\blacktriangleright$}
\setbeamertemplate{navigation symbols}{}  % no navigation on a poster

% Block
\newenvironment<>{myblock}[1]{%
	\begin{actionenv}#2%
		\color{mlrgray}\rule{\textwidth}{5pt}
		\vspace{-20pt}
		\def\insertblocktitle{\color{mlrblue}\LARGE\raggedright#1}%
		\par%
		\usebeamertemplate{block begin}\leftskip=14pt\rightskip=14pt\vspace{10pt}}
	{\par\vspace{1em}\usebeamertemplate{block end}
\end{actionenv}}

% Frame without header
\newenvironment{withoutheader}{%	
	\setbeamertemplate{headline}[default]
	\def\beamer@entrycode{\vspace*{-\headheight}}
}{}

% Header
\setbeamertemplate{headline}{
	\leavevmode
	\begin{beamercolorbox}[wd=\paperwidth]{headline}
		\vspace{-6ex}\\
		\begin{columns}[c]
			\begin{column}{.03\paperwidth}
			\end{column}
			\begin{column}{.675\paperwidth}
				\raggedright
				\usebeamercolor{title in headline}{\color{fg}\textbf{\Huge{\inserttitle}}\\[1ex]}%
				\vspace{20pt}
				\usebeamercolor{title in headline}{\color{fg}\normalsize{\packagedescription}\\[1ex]}%
			\end{column}
			\begin{column}{.28\paperwidth}
				\begin{center}
					\includegraphics[width=.8\textwidth, height=.39\textwidth, keepaspectratio, right]{img/mlr_wh.jpg}
				\end{center}
			\end{column}
			\begin{column}{.03\paperwidth}
			\end{column}
		\end{columns}
		\vspace{2ex}\\
	\end{beamercolorbox}
	\vskip-2cm
}

% Footer
\setbeamertemplate{footline}{
	\begin{beamercolorbox}[wd=\paperwidth]{upper separation line foot}
		\rule{0pt}{2pt}
	\end{beamercolorbox}
	\leavevmode%
	\begin{beamercolorbox}[ht=4ex,leftskip=1cm,rightskip=1cm]{author in head/foot}%
		\href{https://slds-lmu.github.io/lecture_i2ml/}{slds-lmu.github.io/i2ml}
		\hfill
		\vskip1ex
	\end{beamercolorbox}
	\vskip0pt%
	\begin{beamercolorbox}[wd=\paperwidth]{lower separation line foot}
		\rule{0pt}{2pt}
	\end{beamercolorbox}
}
