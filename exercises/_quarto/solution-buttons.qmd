<div id="solution-buttons-header" style="position: sticky; top: 0; background: white; padding: 10px; border-bottom: 2px solid #ddd; z-index: 1000; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.1); margin-bottom: 20px;">

<script>
function toggleAllSolutions() {
  const allDetails = document.querySelectorAll('details');
  // Check if all are currently open (if any are closed, we'll open all)
  const allOpen = Array.from(allDetails).every(d => d.open);
  const newState = !allOpen;

  allDetails.forEach(d => {
    d.open = newState;
  });

  // Update button text and styling
  const btn = document.getElementById('toggle-solutions-btn');
  if (btn) {
    btn.textContent = newState ? 'Hide All Solutions' : 'Show All Solutions';
    // Change button class: success (green) when hiding, danger (red) when showing
    btn.classList.remove('btn-success', 'btn-danger');
    btn.classList.add(newState ? 'btn-success' : 'btn-danger');
  }
}

function setDefaultLanguage(lang) {
  document.querySelectorAll('.panel-tabset').forEach(tabset => {
    const navLinks = tabset.querySelectorAll('.nav-link, button[data-bs-toggle="tab"], a[data-bs-toggle="tab"]');
    navLinks.forEach(link => {
      const text = link.textContent.trim();
      const isTarget =
        (lang === 'Python' && text.includes('Python')) ||
        (lang === 'R' && text.includes('R') && !text.includes('Python'));
      if (isTarget) {
        if (typeof bootstrap !== 'undefined' && bootstrap.Tab) {
          const tab = new bootstrap.Tab(link);
          tab.show();
        } else if (link.click) {
          link.click();
        }
      }
    });
  });
}
</script>

::: {.content-visible when-profile="solution"}
[Show All Solutions]{.btn .btn-danger .btn-sm role="button" id="toggle-solutions-btn" onclick="toggleAllSolutions()"}
:::

[Only Python]{.btn .btn-primary .btn-sm role="button" onclick="setDefaultLanguage('Python')"} |
[Only R]{.btn .btn-primary .btn-sm role="button" onclick="setDefaultLanguage('R')"} |
[Print]{.btn .btn-secondary .btn-sm role="button" onclick="window.print()"}

<style>
@media print {
  #solution-buttons-header {
    display: none !important;
  }
  
  /* Hide Quarto UI elements */
  .quarto-header, #quarto-header,
  .quarto-sidebar, #quarto-sidebar,
  .quarto-margin-sidebar, #quarto-margin-sidebar,
  .nav-footer, #footer {
    display: none !important;
  }

  /* Reset layout */
  .page-columns {
    display: block !important;
    grid-template-columns: 1fr !important;
    gap: 0 !important;
  }
  
  .content, #quarto-content {
    padding: 0 !important;
    margin: 0 !important;
    max-width: 100% !important;
  }
  
  body {
    font-size: 10pt;
    color: black;
    background: white;
  }
  
  /* Ensure full width */
  .main {
    max-width: 100% !important;
    margin: 0 !important;
  }

  /* Page breaks */
  h1, h2, h3 {
    page-break-after: avoid;
  }
  
  pre, blockquote, .cell-output {
    page-break-inside: avoid;
  }
  
  /* Links */
  a {
    text-decoration: none !important;
    color: black !important;
  }
}
</style>

</div>

